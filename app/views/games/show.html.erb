<head>
<script
  src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
  integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30="
  crossorigin="anonymous">
</script>
</head>

<body>

  <div id="gameId" data-game-id=<%= @game.id %>>
  </div>

  <div id="gameState" data-game-state=<%= @game.state %>>
  </div>

  <h1 class="text-center">Infinite Loops Chess</h1>

  <div class="gameover">
    <% if @game.state != Game::IN_PLAY %>
      <span id="gameover">The game is now over.</span>
    <% end %>
    <br/>
    <% case @game.state %>
    <% when 3 %>
      The game has ended in stalemate. 
    <% end %>
  </div>

  <div class="col-10 center offset-1">
    <table id="chessboard">
      <tbody>
        <% [8, 7, 6, 5, 4, 3, 2, 1].each do |row| %>
          <tr>
            <% (1..8).each do |col| %>
              <td
                id=<%="#{col}#{row}"%>
              <% if (col + row).odd? %>
                class="white"
              <% else %>
                class="black"
              <% end %>
              >
                <% piece_image = @game.render_piece(col, row) %>
                <% if piece_image.present? %>
                  <% piece = @game.get_piece_at_coor(col, row) %>
                  <%= image_tag piece_image, :id => "piece", :data => {
                      :id => piece.id,
                      :type => piece.type,
                      :color => (piece.is_white ? "white" : "black"),
                      :x => piece.x_position,
                      :y => piece.y_position
                    }
                  %>
                <% end %>
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
    <%= button_to "Forfeit", forfeit_game_path, :class => "btn btn-success", :method => :patch %>
  </div>
</body>

<!--<span id="piece" data-id="151" data-type="Pawn" data-color="black" data-x-pos="6" data-y-pos="6" class="ui-draggable ui-draggable-handle" style="position: relative; left: initial; top: initial;">
                    blues-black-pawn.png
                  </span>-->

<!--<span id="piece" data-id="154" data-type="Rook" data-color="black" data-x-pos="1" data-y-pos="8" class="ui-draggable ui-draggable-handle" style="position: relative;">
                    <img src="/assets/blues-black-rook-da7a6c550d4df31ed957d479e7e57e9cbe1369f5458c65be3f4e286983322c20.png" alt="Blues black rook">
                  </span>-->
